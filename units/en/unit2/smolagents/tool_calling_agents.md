# Integrating Agents With Tools

Tool Calling Agents are the second type of agent available in `smolagents`. Rather than formulating actions as code snippets, these agents leverage the built-in tool-calling methods from LLM providers, that generate tool calls as variations of JSON blobs. This is the standard way to make agents, proposed as the default tool calling implementation by OpenAI, Anthropic, and many others.

For example, when Alfred wants to prepare for the party and search for catering services and party ideas, a `CodeAgent` would generate and run a Python snippet like:

```python
for query in [
    "Best catering services in Gotham City", 
    "Party theme ideas for superheroes"
]:
    print(web_search(f"Search for: {query}"))

```

Instead, a `ToolCallingAgent` would create a JSON blob like this:

```python
[
    {"name": "web_search", "arguments": "Best catering services in Gotham City"},
    {"name": "web_search", "arguments": "Party theme ideas for superheroes"}
]
```

This JSON blob is then used to execute the tool calls.

While `smolagents` primarily focuses on `CodeAgents` and recommends using them since [they perform better overall](https://arxiv.org/abs/2402.01030), `ToolCallingAgents` can work well in systems where you do not need any variable handling or complex tool calls.

![Code vs JSON Actions](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/code_vs_json_actions.png)  

## How Do Tool Calling Agents Work?  

This agent type follows the same multi-step workflow as `CodeAgent`. If you have any doubts, refer to the [previous section](./code_agents). Just like `CodeAgents`, the LLM generates and executes actions, often involving external tool calls. However, in this case, the actions are structured as JSON objects, specifying tool names and arguments as text. The system then parses these instructions to determine which tool to execute.  

## Example: Running a Tool Calling Agent  

Let's revisit the previous example where Alfred started party preparations, but this time we'll use a `ToolCallingAgent` to highlight the difference. 

Alfred needs help selecting the playlist, and `smolagents` comes to the rescue. We can build an agent capable of searching the web using DuckDuckGo. To enable the agent to use this tool, we simply include it in the tool list when creating the agent. The only change is the agent type. The framework handles the rest automatically:  

```python
from smolagents import ToolCallingAgent, DuckDuckGoSearchTool, HfApiModel

agent = ToolCallingAgent(tools=[DuckDuckGoSearchTool()], model=HfApiModel())

agent.run("Search for the best music recommendations for a party at the Wayne's mansion.")
```

When you check the trace generated by the agent, you won't see the typical `Executing parsed code:` output. Instead, you'll see something like:

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Calling tool: 'web_search' with arguments: {'query': "best music recommendations for a party at Wayne's         â”‚
â”‚ mansion"}                                                                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```  

In this case, the agent generates a structured tool call, which is processed to produce the actual output, as opposed to directly executing code like in a `CodeAgent`.

Alfred's party is shaping up nicely, but there are still a few things that could use some polish. Let's continue exploring `smolagents` to make sure everything comes together for the ultimate party! ðŸŽ‰


## Resources

- [ToolCallingAgent documentation](https://huggingface.co/docs/smolagents/v1.8.1/en/reference/agents#smolagents.ToolCallingAgent) - ToolCallingAgent official documentation
